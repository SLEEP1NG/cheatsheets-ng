webpackJsonp([0xa2973d24c876],{957:function(e,t){e.exports={data:{markdownRemark:{htmlAst:{type:"element",tagName:"div",properties:{},children:[{type:"element",tagName:"h2",properties:{},children:[{type:"text",value:"Request"}]},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Request"}]},{type:"comment",value:" {.-prime} "},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-elixir"]},children:[{type:"text",value:'conn.host          # → "example.com"\nconn.method        # → "GET"\nconn.path_info     # → ["posts", "1"]\nconn.request_path  # → "/posts/1"\nconn.query_string  # → "utm_source=twitter"\nconn.port          # → 80\nconn.scheme        # → :http\nconn.peer          # → { {127, 0, 0, 1}, 12345 }\nconn.remote_ip     # → { 151, 236, 219, 228 }\nconn.req_headers   # → [{"content-type", "text/plain"}]\n'}]}]},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-elixir"]},children:[{type:"text",value:'conn |> get_req_header("content-type")\n# → ["text/plain"]\n'}]}]},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Updating conn"}]},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-elixir"]},children:[{type:"text",value:'conn\n|> put_req_header("accept", "application/json")\n'}]}]},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Usually only useful for tests."}]},{type:"element",tagName:"h2",properties:{},children:[{type:"text",value:"Response"}]},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Response"}]},{type:"comment",value:" {.-prime} "},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-elixir"]},children:[{type:"text",value:'conn.resp_body     # → "..."\nconn.resp_charset  # → "utf-8"\nconn.resp_cookies  # → ...\nconn.resp_headers  # → ...\nconn.status        # → ...\n'}]}]},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Sending responses"}]},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-elixir"]},children:[{type:"text",value:'# Plug.Conn\nconn\n|> html("<html><head>...")\n|> json(%{ message: "Hello" })\n|> text("Hello")\n'}]}]},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-elixir"]},children:[{type:"text",value:'|> redirect(to: "/foo")\n|> redirect(external: "http://www.google.com/")\n|> halt()\n'}]}]},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-elixir"]},children:[{type:"text",value:'|> put_resp_content_type("text/plain")\n|> put_resp_cookie("abc", "def")\n|> put_resp_header("X-Delivered-By", "myapp")\n|> put_status(202)\n|> put_status(:not_found)\n'}]}]},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-elixir"]},children:[{type:"text",value:'|> put_private(:plug_foo, "...")  # reserved for libraries\n'}]}]},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-elixir"]},children:[{type:"text",value:'|> send_resp(201, "")\n'}]}]},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Phoenix views"}]},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-elixir"]},children:[{type:"text",value:'# Phoenix.Controller\nconn\n|> render("index.html")\n|> render("index.html", hello: "world")\n|> render(MyApp.ErrorView, "404.html")\n'}]}]},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-elixir"]},children:[{type:"text",value:"|> put_layout(:foo)\n|> put_layout(false)\n|> put_view(ErrorView)\n"}]}]},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-elixir"]},children:[{type:"text",value:"|> put_secure_browser_headers()\n# prevent clickjacking, nosniff, and xss protection\n# x-frame-options, x-content-type-options, x-xss-protection\n"}]}]},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-elixir"]},children:[{type:"text",value:"|> put_new_view(ErrorView)  # if not set yet\n|> put_new_layout(:foo)\n"}]}]},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-elixir"]},children:[{type:"text",value:"layout(conn)\n"}]}]},{type:"element",tagName:"h2",properties:{},children:[{type:"text",value:"Other features"}]},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Other fields"}]},{type:"comment",value:" {.-prime} "},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-elixir"]},children:[{type:"text",value:"conn.assigns          # storage of crap\nconn.owner            # process\nconn.halted           # if pipeline was halted\nconn.secret_key_base  # ...\nconn.state            # :unset, :set, :file, :sent, :chunked\n"}]}]},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Accepts"}]},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-js"]},children:[{type:"text",value:'plug :accepts, ["html", "json"]\nconn |> accepts(["html", "json"])\nget_format(conn)  # → "html"\nconn.accepts\n'}]}]},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Assigns"}]},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-elixir"]},children:[{type:"text",value:"conn.assigns[:hello]\nconn |> assign(:user_id, 100)\n"}]}]},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-elixir"]},children:[{type:"text",value:"conn = async_assign(conn, :location, fn -> geoip_lookup() end)\nawait_assign(conn, :location)\n"}]}]},{type:"element",tagName:"h3",properties:{},children:[{type:"text",value:"Session"}]},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-elixir"]},children:[{type:"text",value:'conn = fetch_session(conn)   # or plug :fetch_session\n\nconn = put_session(conn, :message, "new stuff we just set in the session")\nget_session(conn, :message)\nconn = clear_session(conn)\n'}]}]},{type:"element",tagName:"pre",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-elixir"]},children:[{type:"text",value:'conn\n|> put_flash(:info, "Success")\n|> put_flash(:error, "Oh no")\n'}]}]},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Also available: "},{type:"element",tagName:"code",properties:{},children:[{type:"text",value:"flash"}]},{type:"text",value:" "},{type:"element",tagName:"code",properties:{},children:[{type:"text",value:"cookie"}]},{type:"text",value:" "},{type:"element",tagName:"code",properties:{},children:[{type:"text",value:"params"}]}]}]},frontmatter:{title:"Phoenix: Plug.Conn",category:"Elixir",intro:null}},relatedPages:{edges:[{node:{id:"SitePage /elixir",context:{nodePath:"/elixir",category:"Elixir",title:"Elixir"}}},{node:{id:"SitePage /ets",context:{nodePath:"/ets",category:"Elixir",title:"Erlang ETS"}}},{node:{id:"SitePage /phoenix-migrations",context:{nodePath:"/phoenix-migrations",category:"Elixir",title:"Phoenix: Ecto migrations"}}},{node:{id:"SitePage /phoenix@1.2",context:{nodePath:"/phoenix@1.2",category:"Elixir",title:"Phoenix 1.2"}}},{node:{id:"SitePage /phoenix-routing",context:{nodePath:"/phoenix-routing",category:"Elixir",title:"Phoenix: Routing"}}},{node:{id:"SitePage /phoenix",context:{nodePath:"/phoenix",category:"Elixir",title:"Phoenix"}}}]},topPages:{edges:[{node:{id:"SitePage /elixir",context:{nodePath:"/elixir",category:"Elixir",title:"Elixir"}}},{node:{id:"SitePage /es6",context:{nodePath:"/es6",category:"JavaScript",title:"ES2015+"}}},{node:{id:"SitePage /react",context:{nodePath:"/react",category:"React",title:"React.js"}}},{node:{id:"SitePage /vimscript",context:{nodePath:"/vimscript",category:"Vim",title:"Vim scripting"}}},{node:{id:"SitePage /vim",context:{nodePath:"/vim",category:"Vim",title:"Vim"}}},{node:{id:"SitePage /capybara",context:{nodePath:"/capybara",category:"Ruby libraries",title:"Capybara"}}}]},allPages:{totalCount:366}},pathContext:{node_id:"/home/rsc/Dev/@devhints/cheatsheets-ng/sheets/phoenix-conn.md absPath of file >>> MarkdownRemark",nodePath:"/phoenix-conn",nodeType:"sheet",title:"Phoenix: Plug.Conn",category:"Elixir",weight:-5,updated:"2017-08-29T00:00:00.000Z"}}}});
//# sourceMappingURL=path---phoenix-conn-8f5f9956332239e48b5d.js.map